#!/bin/bash

# verify root
ID=$(/usr/bin/id -u)
[ $ID -ne 0 ] && echo "You must be root to run $0." && exit 1

ROOTDIR="$(pwd)"
export ROOTDIR

trap '' 2
while :; do
    clear
    echo -en "$(date +%T) - `[ -f .envtype ] && cat .envtype || echo -n Not Installed`\n"
    printf '\u250f''\u2501''\u2501''\u2501''\u2501''\u2501''\u2501''\u2501''\u2501''\u2501''\u2501''\u2501''\u2501''\u2501''\u2501''\u2501''\u2501''\n'
    printf '\u2503''\033[1m MS Cloud Menu\033[0m''\n'
printf '\u2523''\u2501''\n'
printf '\u2503''\033[1m'" 1.\033[0m Backup Service"'\n'
printf '\u2503''\033[1m'" 2.\033[0m RTI Service"'\n'
printf '\u2503''\033[1m'" 3.\033[0m CentOS Repo"'\n'
printf '\u2503''\033[1m'" 4.\033[0m Admin Tasks"'\n'
printf '\u2503''\n'
printf '\u2503''\n'
printf '\u2503''\n'
printf '\u2503''\n'
printf '\u2503''\n'
printf '\u2503''\n'
printf '\u2503''\n'
printf '\u2503''\n'
printf '\u2503''\n'
printf '\u2503''\n'
printf '\u2503''\n'
printf '\u2503''\n'
printf '\u2503''\n'
printf '\u2503''\n'
printf '\u2503''\033[1m'" d.\033[0m I/C/U Deps"'\n'
printf '\u2503''\033[1m'" a.\033[0m I/C/U AWS"'\n'
printf '\u2503''\033[1m'" i.\033[0m Info"'\n'
printf '\u2503''\033[1m'" x.\033[0m Exit"'\n'
printf '\u2517''\u2501''\n'
	echo -n "Enter selection: "
	read selection
	case $selection in
	1)
		cd $ROOTDIR/msposbackup
		./MENU
		cd -
		;;
	2)
		cd $ROOTDIR/msposapp
		./MENU
		cd -
		;;
	3)
		cd $ROOTDIR/tfmscentos
		./MENU
		cd -
		;;
	4)
		cd $ROOTDIR/linuxadmin
		./MENU
		cd -
		;;
	d)
		cd $ROOTDIR/bin
		./install
		echo "Press enter to continue.."
		read
		cd -
		;;
	i)
		cat ./README.md
		echo "Press enter to continue.."
		read
		;;
	a)
		cd $ROOTDIR/bin
		./setupaws
		echo "Press enter to continue.."
		read
		;;
	x) exit ;;
	*) ;;
	esac
done
