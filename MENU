#!/bin/bash
ROOTDIR="`pwd`"
export ROOTDIR
source $ROOTDIR/lib/*.sh

clear
export TERM=xterm
trap '' 2
while :
do
echo "********************************"
echo "** Managed Services Cloud Menu *"
echo "********************************"
echo "* [1] POS Backup service       *"
echo "* [2] POS Application service  *"
echo "* [3] Status                   *"
echo "* [4] Information              *"
echo "* [5] Install/Configure Deps.  *"
echo "* [6] Exit                     *"
echo "********************************"
echo "Enter selection [1-6]: "
#if [ "$1" != "" ]; then
#  selection=$1
#  else
  read selection
#fi
case $selection in
1) cd $ROOTDIR/msposbackup ; ./MENU ; cd - ;;
2) cd $ROOTDIR/msposapp ; ./MENU ; cd - ;;
3) cd $ROOTDIR/bin ; ./status ; echo "Press enter to continue.." ; read ; cd - ;;
4) cat ./README.md ; echo "Press enter to continue.." ; read ;;
5) while true ; do echo -n . ; sleep 1 ; done & 
   cd $ROOTDIR/bin ; ./install
   kill $! ; trap 'kill $!' SIGTERM 
   echo "Press enter to continer.." ; read ; cd -
   echo done
;;
5) cd $ROOTDIR/bin ; ./install ; echo "Press enter to continue.." ; read  ; cd - ;;
6) exit ;;
*) ;;
esac
done
fi
