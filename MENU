#!/bin/bash
ROOTDIR="`pwd`"
source $ROOTDIR/lib/*.sh

clear
export TERM=xterm
if [ "$1" == "" ]; then
trap '' 2
while :
do
echo "********************************"
echo "** Managed Services Cloud Menu *"
echo "********************************"
echo "* [1] POS Backup service       *"
echo "* [2] POS Application service  *"
echo "* [3] Status                   *"
echo "* [4] Information              *"
echo "* [5] Install/Configure Deps.  *"
echo "* [6] Exit                     *"
echo "********************************"
echo "Enter selection [1-6]: "
read selection
case $selection in
1) cd $ROOTDIR/msposbackup ; ./MENU ; cd $ROOTDIR ;;
2) cd $ROOTDIR/msposapp ; ./MENU ; cd $ROOTDIR ;;
3) cd $ROOTDIR/bin ; ./start ; echo "Press enter to continue.." ; read ; cd $ROOTDIR ;;
4) cat ./README.md ; echo "Press enter to continue.." ; read ;;
5) while true ; do echo -n . ; sleep 1 ; done & 
   cd $ROOTDIR/bin ; ./install
   kill $! ; trap 'kill $!' SIGTERM 
   echo "Press enter to continer.." ; read ; cd $ROOTDIR 
   echo done
;;
5) cd $ROOTDIR/bin ; ./install ; echo "Press enter to continue.." ; read  ; cd $ROOTDIR ;;
6) exit ;;
*) ;;
esac
done
else
selection=$1
case $selection in
1) cd msposbackup ; ./MENU $2 ; cd .. ;;
2) cd msposapp ; ./MENU $2 ; cd .. ;;
3) echo "status here" ; echo "Press enter to continue.." ; read ;;
4) cat ./README.md ; echo "Press enter to continue.." ; read ;;
5) ./bin/install ; echo "Press enter to continue.." ; read  ;;
*) ;;
esac
fi
