#!/bin/bash

for file in `ls /tmp/*_dia.out` ; do
echo "" > $file
done

CURRENTDIR="`pwd`"

HEIGHT=30
WIDTH=40
CHOICE_HEIGHT=25
BACKTITLE="POS Application Service"
TITLE="Development"
MENU="Selection: "

OPTIONS=( 1 "Running Contianers" 
          2 "Start Container" 
          3 "Stop Container" 
          4 "Attach to a Container" 
	  5 "List Network Interfaces" 
	  6 "Wipe Everything" 
	  7 "Create RTI Image" 
	  8 "List Images" 
	  9 "Wipe Images" 

	  a "Setup AWS" 
	  i "Install Dependancies" )

CHOICE=$(dialog --begin 2 2 \
		--keep-window \
		--backtitle "$BACKTITLE" \
		--title "$TITLE" \
		--menu "$MENU" \
		$HEIGHT $WIDTH $CHOICE_HEIGHT \
		"${OPTIONS[@]}" \
		--and-widget --clear --begin 2 44 --cr-wrap --trim --title "Create Media" --backtitle "$BACKTITLE" --tailbox /tmp/create-base-image_dia.out 30 120 \
		2>&1 >/dev/tty) 

case $CHOICE in
	1)
		$CURRENTDIR/bin/container_status
		;;
	2)
		$CURRENTDIR/bin/launch_container
		;;
	3)
		$CURRENTDIR/bin/stop_container
		;;
	4)
		$CURRENTDIR/bin/attach_container
		;;
	5)
		$CURRENTDIR/bin/list_nics
		;;
	6)
		$CURRENTDIR/bin/prune-docker
		;;
	7)
		cd $CURRENTDIR/bin ; ./create-base-image 2>&1 >/tmp/create-base-image_dia.out ; cd $CURRENTDIR
		;;
	8)
		cd $CURRENTDIR/bin
                ./list_image 2>&1 >/tmp/list_image_dia.out & 
		dialog --begin 2 10 --cr-wrap --trim --title "List Images" --backtitle "$BACKTITLE" --tailbox /tmp/list_image_dia.out 30 120
		dialog --begin 2 52 --gauge Progress 4 120 1
		cd $CURRENTDIR
		;;
	9)
		$CURRENTDIR/bin/wipe_images
		;;
	i)
		$CURRENTDIR/bin/install
		;;
	a)
		$CURRENTDIR/bin/setup_aws
		;;
esac
