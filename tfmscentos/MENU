#!/usr/bin/bash

# verify root
ID=$(/usr/bin/id -u)
[ $ID -ne 0 ] && echo "You must be root to run $0." && exit 1

ROOTDIR="$(pwd)"
export ROOTDIR

#figure out why I have to do the next command manually
#scl enable python27 /usr/bin/bash

trap '' 2
while :; do
	clear
	echo "**************************************"
	echo "** TFMS CentOS Repo Config ***********"
	echo "**************************************"
	echo "* [1]  Install/Upgrade Deps.         *"
	echo "* [2]  Update QA Repository.         *"
	echo "* [3]  Promote Production Repo.      *"
        echo "*                                    *"
	echo "* [d]  Documentation                 *"
	echo "* [a]  Configure AWS                 *"
	echo "* [x]  Exit                          *"
	echo "**************************************"
	echo -n "Enter selection: "
	read selection
	case $selection in
	1)
		cd $ROOTDIR/bin
		./install_deps
		echo "Press enter to continue.."
		read
		cd -
		;;
	2)
		cd $ROOTDIR/bin
		./update_centos_mirrors
		echo "Press enter to continue.."
		read
		cd -
		;;
	3)
		cd $ROOTDIR/bin
		./promote_prod_repo
		echo "Press enter to continue.."
		read
		cd -
		;;
	a)
		cd $ROOTDIR/bin
		./setup_aws
		echo "Press enter to continue.."
		read
		cd -
		;;
	d)
		./readme.sh | more
		echo "Press enter to continue.."
		read
		cd -
		;;
	x) exit ;;
	*) ;;
	esac
done
