#!/bin/bash
#Redhat/CentOS7 required! 
#
yum -y install net-tools
yum -y install yum-langpacks
yum -y install gtk3
yum -y install epel-release
yum -y install python-pip
yum -y install ksh
yum -y install wget
yum -y install firewalld
yum -y install tigervnc-server-minimal
yum -y localinstall ./bin/websocketd.0.3.0.x86_64.rpm
pip install --upgrade pip

#install docker
yum -y install docker
systemctl enable docker
systemctl start docker
echo "ADD_REGISTRY='--add-registry registry.access.redhat.com'">>/etc/sysconfig/docker
systemctl restart docker

#image building reqs
yum -y install lorax
yum -y install anaconda-tui

#install awscli
pip install awscli

# disable epel repo
yum -y remove epel-release

# install ntp
yum -y install ntp
# sync date/time otherwise AWS auth will fail
ntpdate pool.ntp.org

# add custom scripts to /usr/local/bin
find . -name "*monthname.sh" -exec cp -f {} /usr/local/bin/. \;

#configure awscli
aws configure
